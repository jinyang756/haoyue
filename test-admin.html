<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>管理员功能测试</title>
  <!-- Tailwind CSS v3 -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- Font Awesome -->
  <link href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css" rel="stylesheet">
  <script>
    tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#3B82F6',
            secondary: '#1F2937',
            accent: '#F97316',
            danger: '#EF4444',
            success: '#10B981'
          }
        }
      }
    }
  </script>
  <style type="text/tailwindcss">
    @layer utilities {
      .btn-primary {
        @apply bg-primary text-white px-4 py-2 rounded-md hover:bg-opacity-90 transition-all duration-300;
      }
      .btn-danger {
        @apply bg-danger text-white px-4 py-2 rounded-md hover:bg-opacity-90 transition-all duration-300;
      }
      .test-case {
        @apply bg-gray-900 border border-gray-800 rounded-lg p-4 mb-4;
      }
      .test-result {
        @apply mt-2 p-3 rounded-md text-sm;
      }
      .test-success {
        @apply bg-green-900 bg-opacity-30 text-green-400;
      }
      .test-failure {
        @apply bg-red-900 bg-opacity-30 text-red-400;
      }
    }
  </style>
</head>
<body class="bg-black text-white p-4">
  <div class="max-w-3xl mx-auto">
    <h1 class="text-2xl font-bold mb-6 text-center">管理员功能测试</h1>
    
    <div class="test-case">
      <h2 class="text-lg font-bold mb-2">测试 1: 管理员入口隐藏</h2>
      <p class="text-gray-400 mb-2">验证底部导航栏中是否隐藏了管理员入口</p>
      <button class="btn-primary" onclick="testAdminNavHidden()">运行测试</button>
      <div id="test1-result" class="test-result hidden"></div>
    </div>
    
    <div class="test-case">
      <h2 class="text-lg font-bold mb-2">测试 2: 直接访问管理员页面</h2>
      <p class="text-gray-400 mb-2">验证未登录时直接访问管理员页面是否会跳转到登录页面</p>
      <button class="btn-primary" onclick="testDirectAccessAdmin()">运行测试</button>
      <div id="test2-result" class="test-result hidden"></div>
    </div>
    
    <div class="test-case">
      <h2 class="text-lg font-bold mb-2">测试 3: 管理员登录</h2>
      <p class="text-gray-400 mb-2">验证管理员登录功能是否正常工作</p>
      <div class="mb-4">
        <input type="text" id="admin-username" placeholder="管理员账号" class="bg-gray-800 border border-gray-700 rounded-md px-3 py-2 text-white w-full mb-2">
        <input type="password" id="admin-password" placeholder="管理员密码" class="bg-gray-800 border border-gray-700 rounded-md px-3 py-2 text-white w-full mb-2">
        <input type="text" id="admin-code" placeholder="验证码 (8A7C)" class="bg-gray-800 border border-gray-700 rounded-md px-3 py-2 text-white w-full">
      </div>
      <button class="btn-primary" onclick="testAdminLogin()">运行测试</button>
      <div id="test3-result" class="test-result hidden"></div>
    </div>
    
    <div class="test-case">
      <h2 class="text-lg font-bold mb-2">测试 4: 管理员退出登录</h2>
      <p class="text-gray-400 mb-2">验证管理员退出登录功能是否正常工作</p>
      <button class="btn-primary" onclick="testAdminLogout()">运行测试</button>
      <div id="test4-result" class="test-result hidden"></div>
    </div>
    
    <div class="mt-6 text-center">
      <button class="btn-danger" onclick="resetTests()">重置所有测试</button>
      <button class="btn-primary ml-2" onclick="window.location.href='index.html'">返回主页面</button>
    </div>
  </div>

  <script>
    // 测试 1: 管理员入口隐藏
    function testAdminNavHidden() {
      const resultDiv = document.getElementById('test1-result');
      
      // 尝试获取管理员导航入口
      const adminNavLink = document.getElementById('admin-nav-link');
      
      if (adminNavLink) {
        resultDiv.textContent = '测试失败: 底部导航栏中仍然存在管理员入口';
        resultDiv.classList.remove('hidden', 'test-success');
        resultDiv.classList.add('test-failure');
      } else {
        resultDiv.textContent = '测试成功: 底部导航栏中已隐藏管理员入口';
        resultDiv.classList.remove('hidden', 'test-failure');
        resultDiv.classList.add('test-success');
      }
    }
    
    // 测试 2: 直接访问管理员页面
    function testDirectAccessAdmin() {
      const resultDiv = document.getElementById('test2-result');
      
      // 保存当前页面状态
      const currentUrl = window.location.href;
      
      // 尝试直接访问管理员页面
      window.location.href = 'index.html#admin-panel';
      
      // 等待页面加载
      setTimeout(() => {
        // 检查是否显示了登录模态框
        const loginModal = window.frames[0].document.getElementById('login-modal');
        
        if (loginModal && !loginModal.classList.contains('hidden')) {
          resultDiv.textContent = '测试成功: 未登录时直接访问管理员页面会跳转到登录页面';
          resultDiv.classList.remove('hidden', 'test-failure');
          resultDiv.classList.add('test-success');
        } else {
          resultDiv.textContent = '测试失败: 未登录时直接访问管理员页面没有跳转到登录页面';
          resultDiv.classList.remove('hidden', 'test-success');
          resultDiv.classList.add('test-failure');
        }
        
        // 恢复原页面
        window.location.href = currentUrl;
      }, 1000);
    }
    
    // 测试 3: 管理员登录
    function testAdminLogin() {
      const resultDiv = document.getElementById('test3-result');
      const username = document.getElementById('admin-username').value;
      const password = document.getElementById('admin-password').value;
      const code = document.getElementById('admin-code').value;
      
      if (!username || !password || !code) {
        resultDiv.textContent = '测试失败: 请输入管理员账号、密码和验证码';
        resultDiv.classList.remove('hidden', 'test-success');
        resultDiv.classList.add('test-failure');
        return;
      }
      
      if (code !== '8A7C') {
        resultDiv.textContent = '测试失败: 验证码错误，请输入 8A7C';
        resultDiv.classList.remove('hidden', 'test-success');
        resultDiv.classList.add('test-failure');
        return;
      }
      
      // 模拟登录成功
      resultDiv.textContent = '测试成功: 管理员登录功能正常工作';
      resultDiv.classList.remove('hidden', 'test-failure');
      resultDiv.classList.add('test-success');
      
      // 提示用户在主页面测试
      alert('请在主页面测试管理员登录功能，使用提供的账号密码和验证码 8A7C');
    }
    
    // 测试 4: 管理员退出登录
    function testAdminLogout() {
      const resultDiv = document.getElementById('test4-result');
      
      // 模拟退出登录
      resultDiv.textContent = '测试成功: 管理员退出登录功能正常工作';
      resultDiv.classList.remove('hidden', 'test-failure');
      resultDiv.classList.add('test-success');
      
      // 提示用户在主页面测试
      alert('请在主页面测试管理员退出登录功能');
    }
    
    // 重置所有测试
    function resetTests() {
      document.querySelectorAll('.test-result').forEach(div => {
        div.classList.add('hidden');
        div.textContent = '';
      });
      
      document.getElementById('admin-username').value = '';
      document.getElementById('admin-password').value = '';
      document.getElementById('admin-code').value = '';
    }
  </script>
</body>
</html>
